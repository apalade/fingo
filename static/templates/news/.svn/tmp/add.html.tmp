{% extends 'base.html' %}

{% block js %}
$(function() {
    $("#id_about_name").autocomplete({
			source: "/profile/users",
			minLength: 2,
			select: function(event, ui) {
        $("#id_about_name").attr('value', ui.item.label);
        $("#id_about_name_hidden").attr('value', ui.item.id);
			},
      search: function(event, ui) {        
        $("#id_about_name_hidden").attr('value', '');
			}
		});

    $('#multi-image').MultiFile({
      accept:'gif|jpg|png|svg', max:5, STRING: {
      remove:'[şterge]',
      selected:'Ai selectat: $file',
      denied:'Vă rugăm upload-aţi numai imagini de tip jpg, png, gif sau svg!',
      duplicate:'Fişierul "$file" există deja in listă!'
      }
    });
});

function publish_fb() {
       alert('publishing');
       dict = {method: 'stream.publish'};
       dict.message = $('#id_text').val();
       alert($('#id_video').val());
       FB.ui(
       {
         method: 'stream.publish',
         message: 'getting educated about Facebook Connect',
         attachment: {
           name: 'Connect',
           caption: 'The Facebook Connect JavaScript SDK',
           description: (
             'A small JavaScript library that allows you to harness ' +
             'the power of Facebook, bringing the user\'s identity, ' +
             'social graph and distribution power to your site.'
           ),
           href: 'http://github.com/facebook/connect-js'
         },
         action_links: [
           { text: 'Code', href: 'http://github.com/facebook/connect-js' }
         ],
         user_message_prompt: 'Publicaţi această bârfă pe Facebook'
       },
       function(response) {
         if (response && response.post_id) {
           alert('Post was published.');
         } else {
           alert('Post was not published.');
         }
       });
       return false;
}

{% endblock %}

{% block content %}
<form method="POST" action="/news/add" enctype="multipart/form-data">{% csrf_token %}
  {{form.anonymous.errors}}
  {{form.anonymous.label_tag}} {{form.anonymous}}

  {{form.fb_wall.errors}}
  {{form.fb_wall.label_tag}} {{form.fb_wall}}
  
  {{form.about_name.errors}}
  {{form.about_name.label_tag}} {{form.about_name}}

  {{form.title.errors}}
  {{form.title.label_tag}} {{form.title}}

  {{form.text.errors}}
  {{form.text.label_tag}} {{form.text}}

  {{form.video.errors}}
  {{form.video.label_tag}} {{form.video}}

  Adauga cateva imagini daca ai <input type="file" name="images" id="multi-image" />
  <input type="submit" value="Dă-o mai departe"/>
</form>
{% endblock %}